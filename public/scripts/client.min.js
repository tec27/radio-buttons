!function t(e,n,o){function s(r,c){if(!n[r]){if(!e[r]){var u="function"==typeof require&&require;if(!c&&u)return u(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+r+"'")}var a=n[r]={exports:{}};e[r][0].call(a.exports,function(t){var n=e[r][1][t];return s(n?n:t)},a,a.exports,t,e,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)s(o[r]);return s}({1:[function(t){var e=angular.module("radio-buttons",["ngAnimate","ngRoute",t("./player"),t("./sockets")]);e.config(["$locationProvider","$routeProvider",function(t){t.html5Mode("true").hashPrefix("!")}]),e.run(["socket",function(t){t.connect()}])},{"./player":2,"./sockets":3}],2:[function(t,e){function n(t){this._socket=t,this.playPause=!1,this.rewind=!1,this.forward=!1,t.on("buttons/play/state",function(t){this.playPause=t}.bind(this)),t.on("buttons/rewind/state",function(t){this.rewind=t}.bind(this)),t.on("buttons/forward/state",function(t){this.forward=t}.bind(this))}function o(t){this._socket=t,this.isPlaying=!1,t.on("playing",function(){this.isPlaying=!0}.bind(this)),t.on("paused",function(){this.isPlaying=!1}.bind(this))}var s=e.exports="radio-buttons.player",i=angular.module(s,[t("./sockets")]);i.factory("buttonState",["socket",function(t){return new n(t)}]),i.factory("playerState",["socket",function(t){return new o(t)}]),i.controller("PlayerCtrl",["$scope","buttonState","playerState","socket",function(t,e,n,o){t.buttonState=e,t.playerState=n,t.rewind=function(){o.emit("rewind")},t.playOrPause=function(){o.emit(n.isPlaying?"pause":"play")},t.forward=function(){o.emit("forward")}}])},{"./sockets":3}],3:[function(t,e){function n(t,e){this.host=t,this.scope=e,this.connected=!1,this.lastError=null;var n=this;["_onConnect","_onError","_onDisconnect"].forEach(function(t){n[t]=n[t].bind(n)}),this._socketListeners=[],this._socketOnceListeners=[]}var o=e.exports="radio-buttons.sockets",s=angular.module(o,[]);s.factory("socket",["$rootScope",function(t){return new n("/remotes",t)}]),n.prototype.connect=function(){if(this.connected)return this;if(this.socket)this.socket.socket.reconnect();else{this.socket=io.connect(this.host),this.socket.on("connect",this._onConnect).on("error",this._onError).on("disconnect",this._onDisconnect);var t,e;for(t=0,e=this._socketListeners.length;e>t;t++)this.socket.on(this._socketListeners[t].event,this._socketListeners[t].cb);for(t=0,e=this._socketOnceListeners.length;e>t;t++)this.socket.once(this._socketOnceListeners[t].event,this._socketOnceListeners[t].cb);this._socketOnceListeners=[]}return this},n.prototype.disconnect=function(){return this.connected&&this.socket?(this.socket.disconnect(),this):this},n.prototype._onConnect=function(){console.log("socket connected."),this.connected=!0,this.scope.$apply()},n.prototype._onError=function(t){console.log("socket error!"),console.dir(t);var e=this;this.scope.$apply(function(){e.lastError=t})},n.prototype._onDisconnect=function(){console.log("socket disconnected.");var t=this;setTimeout(function(){t.connected=!1,t.scope.$apply()},0)},n.prototype.on=function(t,e){var n=this,o=function(){e.apply(n,arguments),n.scope.$apply()},s={event:t,cb:o};this._socketListeners.push(s),this.socket&&this.socket.on(t,o);var i=!1;return function(){if(!i){i=!0,n.socket.removeListener(t,o);var e=n._socketListeners.indexOf(s);e>=0&&n._socketListeners.splice(e,1)}}},n.prototype.once=function(t,e){var n,o=this,s=function(){e.apply(o,arguments),o.scope.$apply()};this.socket?this.socket.once(t,s):(n={event:t,cb:s},this._socketOnceListeners.push(n));var i=!1;return function(){if(!i){i=!0,o.socket.removeListener(t,s);var e=o._socketOnceListeners.indexOf(n);e>=0&&o._socketOnceListeners.splice(e,1)}}},n.prototype.emit=function(){if(!this.socket)return this;var t=this,e=Array.prototype.slice.apply(arguments);if("function"==typeof arguments[arguments.length-1]){var n=e[e.length-1];e[e.length-1]=function(){n.apply(t,arguments),t.scope.$apply()}}return this.socket.emit.apply(this.socket,e),this}},{}]},{},[1]);